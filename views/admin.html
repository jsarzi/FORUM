<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventurous</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <link rel="stylesheet" href="/style/forms.css" />
    <link rel="stylesheet" href="/style/admin.css" />
    <script src="/script.js"></script>
    <script src="/crud.js" defer></script>
</head>
<body>

    <!--NAVBAR-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light ">
      <img class="navbar-brand" src='../images/logo.png' width="5%" onclick="location.href = '/';">
      <a class="navbar-brand" href="/">Adventurous</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                DESTINATIONS
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="/cities/paris">PARIS</a>
                <a class="dropdown-item" href="/cities/madrid">MADRID</a>
                <a class="dropdown-item" href="/cities/berlin">BERLIN</a>
                <a class="dropdown-item" href="/cities/lisbonne">LISBON</a>
                <a class="dropdown-item" href="/cities/londres">LONDON</a>
                <a class="dropdown-item" href="/cities/rome">ROME</a>
              </div>
            </li>
         
          <li class="nav-item">
            <a class="nav-link" href="/hotel">HOTELS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/restaurant">RESTAURANTS</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="/activite">ACTIVITIES</a>
            </li>
        </ul>
        
      <div class='right' id="login">
          <button id="nav" class="btn btn-outline-success" type="button" onclick="location.href = '/login'">LOG IN</button>
          <button id="nav" class="btn btn-outline-success" type="button" onclick="location.href = '/signup'">REGISTER</button>
      </div>

 
          
      </div>

    </nav>
<!--HEADER IMAGE-->
    
<header>
    <div class="bg-image" 
    style="background-image: url(../images/back.png);
           height: 50vh;">
</div>
</header>
    
<h1 id="title" style="text-transform: uppercase">WELCOME <%= admin[0].username %> ! </h1>

    <img src="../images/avatar2.jpg" class="rounded-circle" alt="Avatar"> 

<div class="title">
  <h2>ADMINS</h2><button class='buttonCreate'id="createAdmin">‚ûï</button>
</div>
 
<table class="tableau" id="admin">
  <thead>
  <tr>
      <th>ID</th>
      <th>USERNAME</th>
      <th>EMAIL</th>
      <th>EDIT</th>
  </tr>
  </thead>
  <tbody>
  <% for(i=0; i<admin.length; i++) { %>
  <tr class="adminsRows" id='<%= "admin"+i %>'>
      <td> <%= admin[i].id %> </td>
      <td> <%= admin[i].username %> </td>
      <td> <%= admin[i].email %></td>
      <td id="edit"> <button class="loop" id='<%= "loop"+i %>'>üîç</button></td>
  </tr>
  <% } %>
  </tbody>
</table>

<div class="title">
  <h2>USERS</h2>
  <button class='buttonCreate' id="createUser">‚ûï</button>
</div>
    <table class="tableau" id="users">
        <thead>
        <tr>
            <th>ID</th>
            <th>USERNAME</th>
            <th>EMAIL</th>
            <th>EDIT</th>
        </tr>
        </thead>
        <tbody>
        <% for(i=0; i<users.length; i++) { %>
        <tr class="usersRows" id='<%= "user"+i %>'>
            <td> <%= users[i].id %> </td>
            <td> <%= users[i].username %> </td>
            <td> <%= users[i].email %></td>
            <td id="edit"> <button class="loop" id='<%= "loop"+i %>'>üîç</button></td>
        </tr>
        <% } %>
        </tbody>
    </table>

  <div class="title">
    <h2>POSTS</h2>
    <button class='buttonCreate' id="createPost">‚ûï</button>
  </div>
    <table class="tableau" id="posts">
        <thead>
        <tr>
            <th>ID</th>
            <th>TITLE</th>
            <th>CONTENT</th>
            <th>EDIT</th>
        </tr>
        </thead>
        <tbody>
        <% for(i=0; i<posts.length; i++) { %>
        <tr class="postsRows" id='<%= "post"+i %>'>
            <td> <%= posts[i].id %> </td>
            <td> <%= posts[i].title %> </td>
            <td> <%= posts[i].content %></td>
            <td id="edit"> <button class="loop" id='<%= "loop"+i %>'>üîç</button></td>
        </tr>
        <% } %>
        </tbody>
    </table>

    
<!--PART OF THE SCREEN THAT APPEARS WHEN CLICKING ON AN ELEMENT-->
<div id="modalScreen">
  <button id="modalButton">‚ùå</button>
  <table class="tableau" id="modalSelection">
      <thead>
      <tr>
          <th>ID</th>
          <th>username1</th>
          <th>EMAIL</th>
          <th>EDIT</th>
      </tr>
      </thead>
      <tbody>
      <tr>
          <td id="id"> id </td>
          <td id="username"> username </td>
          <td id="email"> email </td>
          <td id="edit"> <button class="update" onclick="updateItem(this)">üíæ</button> <button class="delete" onclick="deleteItem(this)">üóëÔ∏è</button>  <button class="upgrade" onclick="upgradeItem(this)">üîõ </button></td>
      </tr>
      </tbody>
  </table>
</div>

<div id="modalScreen2">
  <button id="modalButton2">‚ùå</button>
  <div id="formUsers">
    <h3>Cr√©er un nouvel admin/utilisateur</h3>
    <div class="row">
        <form action="/admin" method="post">
            <div class="form-group">
                <input type="text" name="username" class="form-control" placeholder="Set an Username" />
            </div>
            <div class="form-group">
                <input type="text" name="email" class="form-control" placeholder="Set an Email" />
            </div>
            <div class="form-group">
              <input id="adminInput" type="text" name="admin" class="form-control" value="3" />
          </div>
            <div class="form-group">
                <button class="btn btn-info">Publier</button>
            </div>
        </form>
    </div>
  </div>
</div>

<div id="modalScreen3">
  <button id="modalButton3">‚ùå</button>
  <div id="formPosts">
    <h3>Cr√©er un nouveau Post</h3>
    <div class="row">
        <form action="/admin" method="post">
            <div class="form-group">
                <input type="text" name="title" class="form-control" placeholder="Set a Title" />
            </div>
            <div class="form-group">
                <textarea name="content" class="form-control" placeholder="Set your Content"></textarea>
            </div>
             <div class="form-group">
            <label for="city">Select a city</label>
            <select name="city" id="city">
              <option value="paris">Paris</option>
              <option value="madrid">Madrid</option>
              <option value="berlin">Berlin</option>
              <option value="lisbonne">Lisbonne</option>
              <option value="londres">Londres</option>
              <option value="rome">Rome</option>
            </select>
        </div>
            <div class="form-group">
              <label for="categorie">Select a categorie</label>
              <select name="categorie" id="categorie">
                <option value="hotel">Hotel</option>
                <option value="restaurant">Restaurant</option>
                <option value="activite">Activite</option>
              </select>
          </div>
            <div class="form-group">
                <button class="btn btn-info">Publier</button>
            </div>
        </form>
    </div>
  </div>
</div>

<!--FOOTER -->
<section class="text">
  Lorem, ipsum dolor sit amet consectetur adipisicing elit. Magnam qui unde quis eveniet! Autem, tenetur ratione consectetur error corrupti ducimus sit, minus deleniti quisquam necessitatibus, ipsum hic minima facere consequuntur.
  Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam qui, sed rerum odio quasi in consectetur temporibus nobis nisi repellendus, deserunt molestiae maiores eveniet ducimus ad et sapiente unde atque!
 

<div class="log" id="login2">
  <button type="button" id="here" class="btn btn-light4" onclick="location.href = '/login'">Log In</button>
  <button type="button" class="btn btn-light5" onclick="location.href = '/signup'">Register</button>
</div>
</section>


<footer class="text-center text-white" style="background-color: #f1f1f1;">
  <!-- Grid container -->
  <div class="container pt-4">
    <!-- Section: Social media -->
    <section class="mb-4">
      <!-- Facebook -->
      <a
        class="btn btn-link btn-floating btn-lg text-dark m-1"
        href="#!"
        role="button"
        data-mdb-ripple-color="dark"
        ><i class="fab fa-facebook-f"></i
      ></a>

      <!-- Twitter -->
      <a
        class="btn btn-link btn-floating btn-lg text-dark m-1"
        href="#!"
        role="button"
        data-mdb-ripple-color="dark"
        ><i class="fab fa-twitter"></i
      ></a>

      <!-- Instagram -->
      <a
        class="btn btn-link btn-floating btn-lg text-dark m-1"
        href="#!"
        role="button"
        data-mdb-ripple-color="dark"
        ><i class="fab fa-instagram"></i
      ></a>

      <!-- Linkedin -->
      <a
        class="btn btn-link btn-floating btn-lg text-dark m-1"
        href="#!"
        role="button"
        data-mdb-ripple-color="dark"
        ><i class="fab fa-linkedin"></i
      ></a>
      
    </section>
    <!-- Section: Social media -->
  </div>

  <!-- Copyright -->
  <div class="text-center text-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
    ¬© 2020 Copyright:
    <a class="text-dark" href="https://mdbootstrap.com/">Adventurous@gmail.com</a>
  </div>
  <!-- Copyright -->
</footer>
<script defer>
  username2 = <%- JSON.stringify(session.user) %>;
  //CE QUI VA ETRE INSERE QUAND NON CONNECTE
  loginPath = "'/login'";
  signupPath = "'/signup'";
  logoutPath = "'/logout'";
  profilePath =  "'/checkUser/"+username+"'";

  loginButton = '<button type="button" id="here" class="btn btn-light4" onclick="location.href ='+ loginPath +'">Log In</button>'
  signupButton = '<button type="button" class="btn btn-light5" onclick="location.href = '+ signupPath + '">Register</button>'
  logoutButton = '<button type="button" id="nav" class="btn btn-outline-success" onclick="location.href =' + logoutPath + '">LOGOUT</button>'
  profileButton = '<button type="button" id="nav" class="btn btn-outline-success" onclick="location.href =' + profilePath + '">MY PROFILE</button>'

  login = document.getElementById('login');
  login2 = document.getElementById('login2');
  logout = document.getElementById('logout');
  if (username2) { 
    login.innerHTML = profileButton + logoutButton;
    login2.innerHTML = profileButton + logoutButton;
  } else {
    login.innerHTML = loginButton + signupButton;
    login2.innerHTML = loginButton + signupButton;
  }
</script>
</body>
</html>